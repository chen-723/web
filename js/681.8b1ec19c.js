"use strict";(self["webpackChunkmy_vue2_project"]=self["webpackChunkmy_vue2_project"]||[]).push([[681],{1552:function(e,t,s){s.d(t,{_z:function(){return u},iD:function(){return o},lj:function(){return i}});var a=s(4373);const r="https://111dc5664cn09.vicp.fun/api",n=a.A.create({baseURL:r,timeout:5e3}),o=(e,t)=>n.post("/login",{username:e,password:t}),i=()=>n.get("/chat/messages"),u=e=>n.post("/chat/messages",e)},7681:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("div",{staticClass:"left"}),t("div",{staticClass:"right"},[t("h4",[e._v("登 录")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"acc",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"acc",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("input",{staticClass:"submit",attrs:{type:"submit",value:"Login"}})]),t("div",{staticClass:"fn"},[t("router-link",{attrs:{to:"/register"}},[e._v("注册账号")]),t("a",{attrs:{href:"javascript:;"}},[e._v("找回密码")])],1)])])},r=[],n=s(1552),o={name:"LoginBox",data(){return{username:"",password:""}},methods:{async handleLogin(){if(this.username&&this.password)try{const{data:e}=await(0,n.iD)(this.username,this.password);localStorage.setItem("token",e.token||"fake-token"),localStorage.setItem("username",this.username),localStorage.setItem("token",e.token||"fake-token"),localStorage.setItem("user",JSON.stringify(e.user)),this.$router.replace("/home")}catch(e){alert("登录失败："+(e.response?.data?.message||e.message))}else alert("请输入账号和密码")}}},i=o,u=s(1656),l=(0,u.A)(i,a,r,!1,null,"094241c8",null),c=l.exports}}]);
//# sourceMappingURL=681.8b1ec19c.js.map